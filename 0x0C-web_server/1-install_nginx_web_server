#!/usr/bin/env bash

# Update the package list to ensure you have the latest information about available packages
sudo apt-get update

# Install Nginx
sudo apt-get -y install nginx

# Create a custom HTML file with "Hello World!"
echo "<html><head><title>Hello World!</title></head><body>Hello World!</body></html>" | sudo tee /var/www/html/index.html

# Make sure Nginx is listening on port 80
sudo sed -i 's/^listen 80 default_server;/listen 80;/g' /etc/nginx/sites-available/default

# Reload Nginx to apply the changes
sudo nginx -s reload

# Ensure that Nginx is running
if pgrep -x "nginx" > /dev/null
then
    echo "Nginx is running."
else
    echo "Error: Nginx is not running. Please check the configuration."
fi
